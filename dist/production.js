(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function n(e){var t=e.main,o=e.wrap,i=e.position,r=void 0===i?0:i,s=e.next,l=e.prev,a=e.infinity,c=void 0!==a&&a,u=e.slidesToShow,d=void 0===u?4:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.main=document.querySelector(t),this.wrap=document.querySelector(o),this.slides=document.querySelector(o).querySelectorAll(".slide"),this.next=document.querySelector(s),this.prev=document.querySelector(l),this.slidesToShow=d,this.options={position:r,infinity:c,widthSlide:Math.floor(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow}}var o,i;return o=n,(i=[{key:"init",value:function(){this.addClass(),this.addStyle(),this.prev&&this.next||this.addArrow(),this.controlSlider()}},{key:"addClass",value:function(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");var t,n=function(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,a=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var e=o.next();return l=e.done,e},e:function(e){a=!0,s=e},f:function(){try{l||null==o.return||o.return()}finally{if(a)throw s}}}}(this.slides);try{for(n.s();!(t=n.n()).done;)t.value.classList.add("glo-slider__item")}catch(e){n.e(e)}finally{n.f()}}},{key:"addStyle",value:function(){var e=document.createElement("style");e.id="sliderCarousel-style",e.textContent="\n    .glo-slider {\n      overflow: hidden !important;\n    }\n\n    .glo-slider__wrap {\n      display: flex !important;\n      transition: transform 0.5s !important;\n      will-change: transform !important;\n    }\n\n    .glo-slider__item {\n      flex: 0 0 ".concat(this.options.widthSlide,"% !important;\n      margin: auto 0 !important;\n      margin-top: 0 !important;\n    }\n    "),document.head.appendChild(e)}},{key:"controlSlider",value:function(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}},{key:"prevSlider",value:function(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.options.maxPosition),this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.widthSlide,"%)"))}},{key:"nextSlider",value:function(){(this.options.infinity||this.options.position<this.options.maxPosition)&&(++this.options.position,this.options.position>this.options.maxPosition&&(this.options.position=0),this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.widthSlide,"%)"))}},{key:"addArrow",value:function(){}}])&&t(o.prototype,i),n}();function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var i,r,s,l,a,c,u,d,m,f,p,v,h,y,g;(function(){var e=document.querySelector(".menu-button"),t=document.querySelector(".popup-menu"),n=document.querySelector(".header-main"),o=document.getElementById("totop");e.addEventListener("click",(function(e){e.target,t.style.cssText="display: flex; animation: fade 0.4s ease-in-out;",t.addEventListener("click",(function(e){var t=e.target;(t.closest(".close-menu-btn")||t.matches("a"))&&(this.style.display="none")}))}));var i=e.parentElement.parentElement.offsetTop;window.addEventListener("scroll",(function(){window.pageYOffset>n.clientHeight?o.classList.add("active"):o.classList.remove("active"),document.documentElement.clientWidth<768&&window.pageYOffset>=i?e.parentElement.parentElement.style.cssText="position: fixed; top: 0; left: 0; z-index: 1009;":e.parentElement.parentElement.style=""}))})(),g=document.querySelector(".dropdown-header"),document.addEventListener("click",(function(e){var t=e.target;(t.matches(".club-select p")||!t.closest(".club-select")&&g.classList.contains("clubs-list-active")||!t.closest(".dropdown-header")&&g.classList.contains("club-list-active"))&&g.classList.toggle("club-list-active")})),v=document.querySelector(".fixed-gift"),h=document.getElementById("gift"),y=function(){h.classList.toggle("active")},v&&document.addEventListener("click",(function(e){var t=e.target;t.closest(".fixed-gift")?(t.style.display="none",y()):(t.classList.contains("close_icon")||t.closest(".close-btn")||!t.closest(".form-content"))&&h.classList.contains("active")&&y()})),l=document.getElementById("price-total"),a=document.getElementById("card_order"),c=document.getElementById("card_leto_mozaika"),u=document.getElementById("card_leto_schelkovo"),d=document.querySelectorAll(".time>input"),m=document.querySelector(".promo-input"),f={1:1999,6:9900,9:13900,12:19900},p={1:2999,6:14990,9:21990,12:24990},a.addEventListener("change",(function(e){var t=e.target;t.closest(".time")&&c.checked?(l.textContent=f[t.value],"ТЕЛО2019"===m.value&&(l.textContent=Math.ceil(Number(.7*Number(l.textContent))))):t.closest(".time")&&u.checked?(l.textContent=p[t.value],"ТЕЛО2019"===m.value&&(l.textContent=Math.ceil(Number(.7*Number(l.textContent))))):t.closest(".club")&&"schelkovo"===t.value?d.forEach((function(e){e.checked&&(l.textContent=p[e.value],"ТЕЛО2019"===m.value&&(l.textContent=Math.ceil(Number(.7*Number(l.textContent)))))})):t.closest(".club")&&"mozaika"===t.value?d.forEach((function(e){e.checked&&(l.textContent=f[e.value],"ТЕЛО2019"===m.value&&(l.textContent=Math.ceil(Number(.7*Number(l.textContent)))))})):t.closest(".promo-input")&&"ТЕЛО2019"===t.value?(t.style.border="1px solid green",l.textContent=Math.ceil(Number(.7*Number(l.textContent)))):t.closest(".promo-input")&&(t.style.border="")})),function(){if(document.querySelector(".main-slider")&&document.querySelectorAll(".slide")){var e=document.querySelector(".main-slider").querySelectorAll(".slide"),t=0,n=function(){e[t].classList.remove("main-slider-slide-active"),++t>=e.length&&(t=0),e[t].classList.add("main-slider-slide-active")};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;setInterval(n,e)}(1500)}}(),function(){if(document.querySelector(".gallery-slider")&&document.querySelectorAll(".slide")&&document.querySelectorAll(".gallery-slider-dot")){var e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=e.querySelectorAll(".gallery-slider-dot");if(e&&t&&n){var o,i=2,r=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},l=function(){r(t,i,"active"),r(n,i,"slick-active"),++i>=t.length&&(i=0),s(t,i,"active"),s(n,i,"slick-active")},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;o=setInterval(l,e)};e.addEventListener("click",(function(e){e.preventDefault();var o=e.target;(o.closest(".slider-arrow")||o.closest(".gallery-slider-dot"))&&(r(t,i,"active"),r(n,i,"slick-active"),o.closest(".slider-arrow-next")?i++:o.closest(".slider-arrow-prev")?i--:o.matches(".gallery-slider-dot")&&n.forEach((function(e,t){e===o&&(i=t)})),i>=t.length?i=0:i<0&&(i=t.length-1),s(t,i,"active"),s(n,i,"slick-active"))})),e.addEventListener("mouseover",(function(e){(e.target.closest(".slider-arrow")||e.target.matches(".gallery-slider-dot"))&&clearInterval(o)})),e.addEventListener("mouseout",(function(e){(e.target.closest(".slider-arrow")||e.target.matches(".gallery-slider-dot"))&&a()})),a(1500)}}}(),function(){document.querySelector(".head-main");var e=document.querySelector("#free_visit_form"),t=document.querySelector("#callback_form"),n=function(e){e.classList.toggle("active")};document.addEventListener("click",(function(o){var i=o.target;(i.matches(".open-popup")||(i.matches("img.close_icon")||i.matches(".overlay"))&&e.classList.contains("active"))&&n(e),(i.matches(".open-callback-popup")||(i.matches("img.close_icon")||i.matches(".overlay"))&&t.classList.contains("active"))&&n(t)}))}(),i=document.querySelectorAll('input[placeholder="Ваш номер телефона..."]'),r=document.querySelectorAll('input[placeholder="Ваше имя..."]'),s=function(e){return(e=(e=(e=e.replace(/\s+/g," ")).replace(/-+/g,"-")).replace(/^[ |\-+]/g,"")).replace(/[ |\-+]$/g,"")},r.forEach((function(e){e.addEventListener("blur",(function(t){var n=t.target.value;n=n.replace(/[^а-яА-ЯёЁ\s\-]/g,"");for(var o=(n=s(n)).split(" "),i=0;i<o.length;i++)o[i]&&(o[i]=o[i][0].toUpperCase()+o[i].substr(1).toLowerCase());n=o.join(" "),e.value=s(n)}))})),i.forEach((function(e){e.addEventListener("blur",(function(e){var t=e.target,n=t.value;n=n.replace(/^\+[^\d()\-]/g,""),18===(n="+"+(n=s(n))).length?t.value=n:(alert("Введите корректный номер телефона длиной 11 символов"),t.value="")}))})),function(){var e=document.querySelector("#footer_form"),t=document.querySelector("#thanks"),n=document.createElement("p");n.textContent="Что-то пошло не так...",n.style.cssText="display: flex; color: red; position: absolute; bottom: 10px; right: 0;",e.addEventListener("submit",(function(r){var s=r.target;r.preventDefault();var l,a=(l=s.elements,function(e){if(Array.isArray(e))return o(e)}(l)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()})),c=new FormData(s),u={};c.forEach((function(e,t){u[t]=e})),(a[0].checked||a[1].checked)&&""!==a[2].value?i(u).then((function(n){if(200!==n.status)throw new Error("status network not 200");e.elements[0].checked=!1,e.elements[1].checked=!1,e.elements[2].blur(),e.elements[2].value="",t.classList.add("active"),t.addEventListener("click",(function(e){var n=e.target;(n.matches("img.close_icon")||n.matches(".overlay")||n.matches(".close-btn"))&&t.classList.contains("active")&&t.classList.remove("active")}))})).catch((function(t){console.error(t),e.appendChild(n)})):(r.preventDefault(),alert("Выберите один из клубов и введите корректный номер телефона"))}));var i=function(e){return console.log("отправка формы..."),fetch("./server.php",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)})}}(),new n({main:".slider-carousel-wrapper",wrap:".services-slider",prev:".carousel-arrow-prev",next:".carousel-arrow-next",slidesToShow:4,infinity:!0}).init()})();